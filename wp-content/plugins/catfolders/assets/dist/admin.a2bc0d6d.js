var J=Object.defineProperty;var W=(t,e,a)=>e in t?J(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a;var C=(t,e,a)=>(W(t,typeof e!="symbol"?e+"":e,a),a);import{p as u,r as j,j as n,a as i,s as y,b as g,c as x,E as Q,m as f,I as D,C as X,M as Y,S as T,F as Z,d as ee,e as te,_ as ne,f as se}from"./SettingBanner.ebca0395.js";const ae=()=>/^((?!chrome|android).)*safari/i.test(navigator.userAgent),B=t=>Array.isArray(t)&&t.every(e=>typeof e=="object"&&!(e instanceof Array)),re=t=>Array.isArray(t)&&t.every(e=>Array.isArray(e)),oe=t=>Array.from(t.map(e=>Object.keys(e)).reduce((e,a)=>new Set([...e,...a]),[])),ie=(t,e)=>{e=e||oe(t);let a=e,s=e;B(e)&&(a=e.map(l=>l.label),s=e.map(l=>l.key));const r=t.map(l=>s.map(d=>le(d,l)));return[a,...r]},le=(t,e)=>{const a=t.replace(/\[([^\]]+)]/g,".$1").split(".").reduce(function(s,r,l,d){const c=s[r];if(c==null)d.splice(1);else return c},e);return a===void 0?t in e?e[t]:"":a},ce=t=>typeof t>"u"||t===null?"":t,z=(t,e=",",a='"')=>t.filter(s=>s).map(s=>s.map(r=>ce(r)).map(r=>`${a}${r}${a}`).join(e)).join(`
`),de=(t,e,a,s)=>z(e?[e,...t]:t,a,s),pe=(t,e,a,s)=>z(ie(t,e),a,s),ge=(t,e,a,s)=>e?`${e.join(a)}
${t}`:t.replace(/"/g,'""'),K=(t,e,a,s)=>{if(B(t))return pe(t,e,a,s);if(re(t))return de(t,e,a,s);if(typeof t=="string")return ge(t,e,a);throw new TypeError('Data should be a "String", "Array of arrays" OR "Array of objects" ')},M=(t,e,a,s,r)=>{const l=K(t,a,s,r),d=ae()?"application/csv":"text/csv",c=new Blob([e?"\uFEFF":"",l],{type:d}),o=`data:${d};charset=utf-8,${e?"\uFEFF":""}${l}`,p=window.URL||window.webkitURL;return typeof p.createObjectURL>"u"?o:p.createObjectURL(c)},V={data:u.exports.oneOfType([u.exports.string,u.exports.array,u.exports.func]).isRequired,headers:u.exports.array,target:u.exports.string,separator:u.exports.string,filename:u.exports.string,uFEFF:u.exports.bool,onClick:u.exports.func,asyncOnClick:u.exports.bool,enclosingCharacter:u.exports.string},G={separator:",",filename:"generatedBy_react-csv.csv",uFEFF:!0,asyncOnClick:!1,enclosingCharacter:'"'},ue={target:"_blank"};class R extends j.Component{constructor(e){super(e),this.state={}}buildURI(){return M(...arguments)}componentDidMount(){const{data:e,headers:a,separator:s,enclosingCharacter:r,uFEFF:l,target:d,specs:c,replace:o}=this.props;this.state.page=window.open(this.buildURI(e,l,a,s,r),d,c,o)}getWindow(){return this.state.page}render(){return null}}C(R,"defaultProps",Object.assign(G,ue)),C(R,"propTypes",V);class A extends j.Component{constructor(e){super(e),this.buildURI=this.buildURI.bind(this)}buildURI(){return M(...arguments)}handleLegacy(e,a=!1){if(window.navigator.msSaveOrOpenBlob){e.preventDefault();const{data:s,headers:r,separator:l,filename:d,enclosingCharacter:c,uFEFF:o}=this.props,p=a&&typeof s=="function"?s():s;let w=new Blob([o?"\uFEFF":"",K(p,r,l,c)]);return window.navigator.msSaveBlob(w,d),!1}}handleAsyncClick(e){const a=s=>{if(s===!1){e.preventDefault();return}this.handleLegacy(e,!0)};this.props.onClick(e,a)}handleSyncClick(e){if(this.props.onClick(e)===!1){e.preventDefault();return}this.handleLegacy(e)}handleClick(){return e=>{if(typeof this.props.onClick=="function")return this.props.asyncOnClick?this.handleAsyncClick(e):this.handleSyncClick(e);this.handleLegacy(e)}}render(){const{data:e,headers:a,separator:s,filename:r,uFEFF:l,children:d,onClick:c,asyncOnClick:o,enclosingCharacter:p,...w}=this.props,S=typeof window>"u"?"":this.buildURI(e,l,a,s,p);return n("a",{download:r,...w,ref:q=>this.link=q,target:"_self",href:S,onClick:this.handleClick(),children:d})}}C(A,"defaultProps",G),C(A,"propTypes",V);const he=A;const v=({header:t,actions:e,children:a})=>i("div",{className:"catf-setting-card",children:[n("div",{className:"catf-setting-card-head",children:t}),n("div",{className:"catf-setting-card-content",children:a}),e&&n("div",{className:"catf-setting-card-actions",children:e})]}),{catfData:h}=window,E=y.div`
  display: flex;
  margin-bottom: 10px;
  align-items: center;
`,fe=()=>{const[t,e]=g.exports.useState([]),[a,s]=g.exports.useState(!1),[r,l]=g.exports.useState(""),[d,c]=g.exports.useState(!1);function o(){s(!0),Q.exportCSV().then(m=>{f.success(h.i18n.global.successfully),e(m.folders),s(!1)}).catch(m=>{f.error(h.i18n.global.something_went_wrong),s(!1),console.log(m)})}function p(m){const S=m.target.files;S!=null&&S.length&&l(S[0])}function w(){const m=new FormData;m.append("file",r),c(!0),D.importCSV(m).then(()=>{f.success(h.i18n.global.successfully),c(!1)}).catch(()=>{f.error(h.i18n.global.something_went_wrong),c(!1)})}return n(v,{header:h.i18n.global.backup_and_restore,children:n("table",{className:"form-table backup-restore",children:i("tbody",{children:[i("tr",{children:[n("th",{children:h.i18n.global.export}),i("td",{children:[i(E,{children:[n("button",{onClick:o,className:x("button","button-primary",{"updating-message":a}),style:{marginRight:10},children:h.i18n.global.export_now}),t.length?n(he,{uFEFF:!1,filename:"cat_folder",data:t,children:h.i18n.global.download_csv}):null]}),n("p",{children:h.i18n.global.export_desc})]})]}),i("tr",{children:[n("th",{children:h.i18n.global.import}),i("td",{children:[i(E,{children:[n("input",{type:"file",accept:".csv",onChange:p}),n("button",{style:{display:r?"block":"none"},onClick:w,className:x("button",{"updating-message":d}),children:h.i18n.global.import_now})]}),n("p",{children:h.i18n.global.choose_csv_file_to_import})]})]})]})})})};const{catfData:F}=window,me=()=>{const[t,e]=g.exports.useState(!1);function a(){!confirm(F.i18n.global.are_you_sure_to_delete)||(e(!0),X.cleanDB().then(()=>{e(!1),location.reload()}).catch(r=>{console.log(r),e(!1)}))}return n(v,{header:F.i18n.global.clear_all_data,actions:n("div",{style:{textAlign:"right"},children:n("button",{onClick:a,className:x("button","button-danger",{"updating-message":t}),style:{pointerEvents:t?"none":"auto"},children:F.i18n.global.clear_now})}),children:n("p",{children:F.i18n.global.this_action_will_delete})})},{catfData:k}=window,be=()=>{const[t,e]=g.exports.useState(!1);function a(){e(!0),s(1,()=>{f.success(k.i18n.global.successfully),e(!1)},()=>{f.error(k.i18n.global.something_went_wrong),e(!1)})}const s=(r,l,d)=>{Y.generateSize({page:r}).then(c=>{c.success&&(c.next=="1"?s(r+1,l,onerror):l())}).catch(c=>{console.log({err:c}),d!=null&&d()})};return n(v,{header:k.i18n.global.attachment_size,children:i("div",{className:"catf-setting-card-panel",children:[k.i18n.global.generate_size_desc,n("button",{onClick:a,className:x("button","button-primary",{"updating-message":t}),children:k.i18n.global.generate})]})})},{catfData:N}=window,_e=()=>{const[t,e]=g.exports.useState(!1),[a,s]=g.exports.useState(window.catfSettings.apiKey);async function r(){e(!0),T.generateAPIKey().then(l=>{s(l),e(!1)}).catch(l=>{console.log({err:l}),e(!1)})}return n(v,{header:N.i18n.global.rest_api_key,children:i("div",{className:"catf-setting-card-panel",children:[i("div",{children:[n("input",{readOnly:!0,value:a,hidden:!a,type:"text",className:"regular-text code"}),n("p",{className:"description",children:N.i18n.global.rest_api_key_desc})]}),n("button",{onClick:r,className:x("button","button-primary",{"updating-message":t}),children:N.i18n.global.generate})]})})};const{catfSettings:we,catfData:_}=window,ye=()=>{const[t,e]=g.exports.useState(!1),[a,s]=g.exports.useState(""),[r,l]=g.exports.useState(we.pluginsToImport),d=o=>{const p=[...r],w=p.find(m=>m.prefix===o);w&&(w.folder_counter=-1),l(p)};function c(o){s(o),e(!0),D.getFolderStructure(o).then(()=>{D.getAttachmentInFolder(o).then(()=>{D.process(o).then(()=>{f.success(_.i18n.global.successfully),d(o),s(""),e(!1)}).catch(p=>{f.error(_.i18n.global.something_went_wrong),s(""),e(!1),console.log(p)})}).catch(p=>{f.error(_.i18n.global.something_went_wrong),s(""),e(!1),console.log(p)})}).catch(p=>{f.error(_.i18n.global.something_went_wrong),s(""),e(!1),console.log(p)})}return n(v,{header:_.i18n.global.import_from_other_plugin,actions:n("div",{dangerouslySetInnerHTML:{__html:_.i18n.global.more_plugins_to_import}}),children:n("ul",{className:"carf-setting-import-list",children:r.map(o=>i("li",{"data-plugin":o.prefix,className:x("carf-setting-import-item",{success:o.folder_counter==-1}),children:[i("div",{className:"carf-setting-import-item__title",children:[o.plugin_name," (",_.i18n.global.by," ",o.author,")",n("p",{children:o.folder_counter==-1?_.i18n.global.already_imported:o.folder_counter+" "+_.i18n.global.folders_found_to_import})]}),n("button",{onClick:()=>c(o.prefix),disabled:t&&o.prefix!==a||o.folder_counter==-1,className:x("button","button-primary",{"updating-message":t&&o.prefix===a}),children:_.i18n.global.import_now})]},o.prefix))})})},H=y.div`
  display: flex;
  justify-content: space-between;
  align-items: center;
  width: 100%;

  button {
    font-weight: 400;
  }

  h4 {
    font-size: 15px;
    margin: 0;
  }

  svg {
    width: 24px;
  }
`;y.p.attrs({className:"description"})`
  display: flex;
  .description-icon {
    display: inline-flex;
    align-items: center;
    svg {
      width: 16px;
      fill: #2271b1;
    }
  }
`;y.hr`
  margin: 10px 0;
  border-top: 1px solid rgb(226, 228, 231);
`;const ve=({name:t,onChange:e,checked:a})=>{function s(r){e({name:t,value:r.target.checked})}return i("div",{className:"catf-switch-wrapper",children:[n("input",{onChange:s,checked:a,id:t,type:"checkbox"}),n("label",{htmlFor:t})]})},{catfData:$}=window,xe=window.catfSettings.globalSettings,Se=()=>{const[t,e]=g.exports.useState(xe.allowsvgupload);function a(s){e(!t),T.globalSetting(s).then(()=>{f.success($.i18n.global.save_successfully)}).catch(r=>{f.error($.i18n.global.something_went_wrong),console.log(r)})}return n(Z,{children:i(H,{children:[n("h4",{children:$.i18n.global.allow_svg_upload_sanitization}),n(ve,{checked:t,name:"allowsvgupload",onChange:a})]})})},{catfData:Ce}=window,ke=()=>n(v,{header:n(H,{children:Ce.i18n.global.settings}),children:n(Se,{})}),{catfData:Fe}=window,Ie=()=>n(v,{header:Fe.i18n.global.license,children:n(ee,{})});const{catfData:b}=window,De=y.div`
  display: flex;
  align-items: center;
  height: 100%;
  img {
    width: 80%;
    display: block;
    margin: auto;
    @media (max-width: 575px) {
      width: 50%;
    }
  }
`,P=y.ul`
  list-style: disc;
  padding-left: 20px;
`,Ne=y.div`
  display: flex;
  flex-wrap: wrap;
`,L=y.div`
  width: 100%;
  @media (min-width: 576px) {
    width: ${t=>t.theme.main};
  }
`;function $e(){return n(v,{header:b.i18n.global.support,children:i(Ne,{children:[n(L,{theme:{main:"calc(5/12*100%)"},children:n(De,{children:n("img",{src:`${window.catfData.pluginUrl}assets/img/mascot.svg`,alt:""})})}),i(L,{theme:{main:"calc(7/12*100%)"},children:[n("h3",{children:b.i18n.global.getting_started}),i(P,{children:[n("li",{children:n("a",{href:"https://wpmediafolders.com/docs/catfolders/licensing/#license",target:"__blank",rel:"noopener noreferrer",children:b.i18n.global.enter_license_key})}),n("li",{children:n("a",{href:"https://wpmediafolders.com/docs/settings/migrate/",target:"__blank",rel:"noopener noreferrer",children:b.i18n.global.import_from_other_plugin_normal})})]}),n("h3",{children:b.i18n.global.need_help}),i(P,{children:[n("li",{children:n("a",{href:"https://wordpress.org/support/plugin/catfolders/",target:"__blank",rel:"noopener noreferrer",children:b.i18n.global.create_support_topic})}),n("li",{children:n("a",{href:"https://wpmediafolders.com/contact/",target:"__blank",rel:"noopener noreferrer",children:b.i18n.global.chat_with_us})})]}),n("h3",{children:b.i18n.global.love}),i(P,{children:[n("li",{children:i("a",{href:"https://wordpress.org/support/plugin/catfolders/reviews/?filter=5",target:"__blank",rel:"noopener noreferrer",children:[b.i18n.global.write_us," \u{1F496}"]})}),i("li",{children:[n("a",{href:"https://feedbo.io/board/catfolders/",target:"__blank",rel:"noopener noreferrer",children:b.i18n.global.send_us_idea})," ",b.i18n.global.to_make_work," \u{1F44B}"]})]})]})]})})}const{catfData:I,wp:Pe,catfSettings:Ae}=window,{hooks:Ue}=Pe,{pluginsToImport:Re}=Ae;let U=[{id:"settings",name:I.i18n.global.settings,content:n(ke,{})},{id:"goPro",name:I.i18n.global.go_pro,content:n(Ie,{})},{id:"import",name:I.i18n.global.tools,content:i("div",{children:[Re.length?n(ye,{}):null,n(_e,{}),n(be,{}),n(fe,{}),n(me,{})]})},{id:"support",name:I.i18n.global.support,content:n($e,{})}];U=Ue.applyFilters("catf_setting_tabs",U);const O=U,Ee=window.catfData.pluginUrl+"assets/img/logo.svg",Le=()=>{const[t,e]=g.exports.useState("settings"),a=s=>{e(s)};return i(te,{prefixCls:"catf",theme:{token:{colorPrimary:"#2271b1"}},children:[n("div",{className:"catf-setting-page-head",children:i("nav",{className:"catf-setting-page-tabs-wrapper",children:[i("div",{className:"header-logo",children:[n("img",{src:Ee}),i("a",{href:"https://wpmediafolders.com/",target:"_blank",rel:"noopener noreferrer",children:["CatFolders",n("sup",{children:ne("lite")})]})]}),O.map(s=>n("a",{onClick:()=>{a(s.id)},className:t===s.id?"active":"",children:s.name},s.id))]})}),n("div",{className:"catf-setting-page",children:n("div",{className:"catf-setting-page-content",children:O.map((s,r)=>n("div",{className:"catf-setting-page-container",style:{visibility:t===s.id?"visible":"hidden",display:t===s.id?"block":"none"},children:s.content},r))})})]})};document.addEventListener("DOMContentLoaded",function(){const t=document.getElementById("catf-setting-app");t&&se.createRoot(t).render(n(Le,{}))});
